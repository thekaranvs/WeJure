{
"version":3,
"file":"module$node_modules$miller_rabin$lib$mr.js",
"lineCount":4,
"mappings":"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",
"sources":["node_modules/miller-rabin/lib/mr.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$miller_rabin$lib$mr\"] = function(global,require,module,exports) {\nvar bn = require('bn.js');\nvar brorand = require('brorand');\n\nfunction MillerRabin(rand) {\n  this.rand = rand || new brorand.Rand();\n}\nmodule.exports = MillerRabin;\n\nMillerRabin.create = function create(rand) {\n  return new MillerRabin(rand);\n};\n\nMillerRabin.prototype._randbelow = function _randbelow(n) {\n  var len = n.bitLength();\n  var min_bytes = Math.ceil(len / 8);\n\n  // Generage random bytes until a number less than n is found.\n  // This ensures that 0..n-1 have an equal probability of being selected.\n  do\n    var a = new bn(this.rand.generate(min_bytes));\n  while (a.cmp(n) >= 0);\n\n  return a;\n};\n\nMillerRabin.prototype._randrange = function _randrange(start, stop) {\n  // Generate a random number greater than or equal to start and less than stop.\n  var size = stop.sub(start);\n  return start.add(this._randbelow(size));\n};\n\nMillerRabin.prototype.test = function test(n, k, cb) {\n  var len = n.bitLength();\n  var red = bn.mont(n);\n  var rone = new bn(1).toRed(red);\n\n  if (!k)\n    k = Math.max(1, (len / 48) | 0);\n\n  // Find d and s, (n - 1) = (2 ^ s) * d;\n  var n1 = n.subn(1);\n  for (var s = 0; !n1.testn(s); s++) {}\n  var d = n.shrn(s);\n\n  var rn1 = n1.toRed(red);\n\n  var prime = true;\n  for (; k > 0; k--) {\n    var a = this._randrange(new bn(2), n1);\n    if (cb)\n      cb(a);\n\n    var x = a.toRed(red).redPow(d);\n    if (x.cmp(rone) === 0 || x.cmp(rn1) === 0)\n      continue;\n\n    for (var i = 1; i < s; i++) {\n      x = x.redSqr();\n\n      if (x.cmp(rone) === 0)\n        return false;\n      if (x.cmp(rn1) === 0)\n        break;\n    }\n\n    if (i === s)\n      return false;\n  }\n\n  return prime;\n};\n\nMillerRabin.prototype.getDivisor = function getDivisor(n, k) {\n  var len = n.bitLength();\n  var red = bn.mont(n);\n  var rone = new bn(1).toRed(red);\n\n  if (!k)\n    k = Math.max(1, (len / 48) | 0);\n\n  // Find d and s, (n - 1) = (2 ^ s) * d;\n  var n1 = n.subn(1);\n  for (var s = 0; !n1.testn(s); s++) {}\n  var d = n.shrn(s);\n\n  var rn1 = n1.toRed(red);\n\n  for (; k > 0; k--) {\n    var a = this._randrange(new bn(2), n1);\n\n    var g = n.gcd(a);\n    if (g.cmpn(1) !== 0)\n      return g;\n\n    var x = a.toRed(red).redPow(d);\n    if (x.cmp(rone) === 0 || x.cmp(rn1) === 0)\n      continue;\n\n    for (var i = 1; i < s; i++) {\n      x = x.redSqr();\n\n      if (x.cmp(rone) === 0)\n        return x.fromRed().subn(1).gcd(n);\n      if (x.cmp(rn1) === 0)\n        break;\n    }\n\n    if (i === s) {\n      x = x.redSqr();\n      return x.fromRed().subn(1).gcd(n);\n    }\n  }\n\n  return false;\n};\n\n};"],
"names":["shadow$provide","global","require","module","exports","MillerRabin","rand","brorand","Rand","bn","create","MillerRabin.create","prototype","_randbelow","MillerRabin.prototype._randbelow","n","len","bitLength","min_bytes","Math","ceil","a","generate","cmp","_randrange","MillerRabin.prototype._randrange","start","stop","size","sub","add","test","MillerRabin.prototype.test","k","cb","red","mont","rone","toRed","max","n1","subn","s","testn","d","shrn","rn1","x","redPow","i","redSqr","prime","getDivisor","MillerRabin.prototype.getDivisor","g","gcd","cmpn","fromRed"]
}
