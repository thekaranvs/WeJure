{
"version":3,
"file":"module$node_modules$elliptic$lib$elliptic$ec$index.js",
"lineCount":9,
"mappings":"AAAAA,cAAA,CAAA,kDAAA,CAAuE,QAAQ,CAACC,MAAD,CAAQC,OAAR,CAAgBC,MAAhB,CAAuBC,OAAvB,CAAgC,CAa/GC,QAASA,GAAE,CAACC,OAAD,CAAU,CACnB,GAAI,EAAE,IAAF,WAAkBD,GAAlB,CAAJ,CACE,MAAO,KAAIA,EAAJ,CAAOC,OAAP,CAGc,SAAvB,GAAI,MAAOA,QAAX,GACEC,MAAA,CAAOC,MAAOC,CAAAA,SAAUC,CAAAA,cAAeC,CAAAA,IAAhC,CAAqCC,MAArC,CAA6CN,OAA7C,CAAP,CACE,gBADF,CACqBA,OADrB,CAGA,CAAAA,OAAA,CAAUM,MAAA,CAAON,OAAP,CAJZ,CAQIA,QAAJ,WAAuBM,OAAOC,CAAAA,WAA9B,GACEP,OADF,CACY,CAAEQ,MAAOR,OAAT,CADZ,CAGA,KAAKQ,CAAAA,KAAL,CAAaR,OAAQQ,CAAAA,KAAMA,CAAAA,KAC3B,KAAKC,CAAAA,CAAL,CAAS,IAAKD,CAAAA,KAAMC,CAAAA,CACpB,KAAKC,CAAAA,EAAL,CAAU,IAAKD,CAAAA,CAAEE,CAAAA,KAAP,CAAa,CAAb,CACV,KAAKC,CAAAA,CAAL,CAAS,IAAKJ,CAAAA,KAAMI,CAAAA,CAGpB,KAAKA,CAAAA,CAAL,CAASZ,OAAQQ,CAAAA,KAAMI,CAAAA,CACvB,KAAKA,CAAAA,CAAEC,CAAAA,UAAP,CAAkBb,OAAQQ,CAAAA,KAAMC,CAAAA,CAAEK,CAAAA,SAAhB,EAAlB;AAAgD,CAAhD,CAGA,KAAKC,CAAAA,IAAL,CAAYf,OAAQe,CAAAA,IAApB,EAA4Bf,OAAQQ,CAAAA,KAAMO,CAAAA,IA1BvB,CAVrB,IAAIC,GAAKpB,OAAA,CAAQ,sCAAR,CAAT,CACIqB,SAAWrB,OAAA,CAAQ,6CAAR,CACXsB,OAAAA,CAAQtB,OAAA,CAAQ,iDAAR,CACZ,KAAIU,OAASV,OAAA,CAAQ,kDAAR,CAAb,CACIuB,KAAOvB,OAAA,CAAQ,mCAAR,CADX,CAEIK,OAASiB,MAAMjB,CAAAA,MAFnB,CAIImB,QAAUxB,OAAA,CAAQ,kDAAR,CAJd,CAKIyB,UAAYzB,OAAA,CAAQ,wDAAR,CA8BhBC;MAAOC,CAAAA,OAAP,CAAiBC,EAEjBA,GAAGI,CAAAA,SAAUmB,CAAAA,OAAb,CAAuBC,QAAgB,CAACvB,OAAD,CAAU,CAC/C,MAAO,KAAIoB,OAAJ,CAAY,IAAZ,CAAkBpB,OAAlB,CADwC,CAIjDD,GAAGI,CAAAA,SAAUqB,CAAAA,cAAb,CAA8BC,QAAuB,CAACC,IAAD,CAAOC,GAAP,CAAY,CAC/D,MAAOP,QAAQQ,CAAAA,WAAR,CAAoB,IAApB,CAA0BF,IAA1B,CAAgCC,GAAhC,CADwD,CAIjE5B,GAAGI,CAAAA,SAAU0B,CAAAA,aAAb,CAA6BC,QAAsB,CAACC,GAAD,CAAMJ,GAAN,CAAW,CAC5D,MAAOP,QAAQY,CAAAA,UAAR,CAAmB,IAAnB,CAAyBD,GAAzB,CAA8BJ,GAA9B,CADqD,CAI9D5B,GAAGI,CAAAA,SAAU8B,CAAAA,UAAb,CAA0BC,QAAmB,CAAClC,OAAD,CAAU,CAChDA,OAAL,GACEA,OADF,CACY,EADZ,CAIImC,QAAAA,CAAO,IAAIlB,QAAJ,CAAa,CACtBF,KAAM,IAAKA,CAAAA,IADW,CAEtBqB,KAAMpC,OAAQoC,CAAAA,IAFQ,CAGtBC,QAASrC,OAAQqC,CAAAA,OAAjBA,EAA4B,MAHN,CAItBC,QAAStC,OAAQsC,CAAAA,OAAjBA,EAA4BnB,IAAA,CAAK,IAAKJ,CAAAA,IAAKwB,CAAAA,YAAf,CAJN,CAKtBC,WAAYxC,OAAQsC,CAAAA,OAApBE,EAA+BxC,OAAQwC,CAAAA,UAAvCA;AAAqD,MAL/B,CAMtBC,MAAO,IAAKhC,CAAAA,CAAEiC,CAAAA,OAAP,EANe,CAAb,CAWX,KAFA,IAAIC,MAAQ,IAAKlC,CAAAA,CAAEmC,CAAAA,UAAP,EAAZ,CACIC,IAAM,IAAKpC,CAAAA,CAAEqC,CAAAA,GAAP,CAAW,IAAI9B,EAAJ,CAAO,CAAP,CAAX,CACV,CAAA,CAAA,CAAS,CACP,IAAIU,KAAO,IAAIV,EAAJ,CAAOmB,OAAKY,CAAAA,QAAL,CAAcJ,KAAd,CAAP,CACX,IAAI,EAAgB,CAAhB,CAAAjB,IAAKsB,CAAAA,GAAL,CAASH,GAAT,CAAA,CAAJ,CAIA,MADAnB,KAAKuB,CAAAA,KAAL,CAAW,CAAX,CACO,CAAA,IAAKzB,CAAAA,cAAL,CAAoBE,IAApB,CANA,CAhB4C,CA0BvD3B,GAAGI,CAAAA,SAAU+C,CAAAA,YAAb,CAA4BC,QAAqB,CAACC,GAAD,CAAMC,SAAN,CAAiB,CAChE,IAAIC,MAA2B,CAA3BA,CAAQF,GAAIR,CAAAA,UAAJ,EAARU,CAA+B,IAAK7C,CAAAA,CAAEK,CAAAA,SAAP,EACvB,EAAZ,CAAIwC,KAAJ,GACEF,GADF,CACQA,GAAIzC,CAAAA,KAAJ,CAAU2C,KAAV,CADR,CAEA,OAAI,CAACD,SAAL,EAAqC,CAArC,EAAkBD,GAAIJ,CAAAA,GAAJ,CAAQ,IAAKvC,CAAAA,CAAb,CAAlB,CACS2C,GAAIN,CAAAA,GAAJ,CAAQ,IAAKrC,CAAAA,CAAb,CADT,CAGS2C,GAPuD,CAUlErD,GAAGI,CAAAA,SAAUoD,CAAAA,IAAb,CAAoBC,QAAa,CAACJ,GAAD,CAAMK,GAAN,CAAW9B,GAAX,CAAgB3B,OAAhB,CAAyB,CACrC,QAAnB,GAAI,MAAO2B,IAAX,GACE3B,OACA,CADU2B,GACV,CAAAA,GAAA,CAAM,IAFR,CAIK3B,QAAL,GACEA,OADF;AACY,EADZ,CAGAyD,IAAA,CAAM,IAAKjC,CAAAA,cAAL,CAAoBiC,GAApB,CAAyB9B,GAAzB,CACNyB,IAAA,CAAM,IAAKF,CAAAA,YAAL,CAAkB,IAAIlC,EAAJ,CAAOoC,GAAP,CAAY,EAAZ,CAAlB,CAGN,KAAIT,MAAQ,IAAKlC,CAAAA,CAAEmC,CAAAA,UAAP,EACRc,IAAAA,CAAOD,GAAIE,CAAAA,UAAJ,EAAiBjB,CAAAA,OAAjB,CAAyB,IAAzB,CAA+BC,KAA/B,CAGPF,MAAAA,CAAQW,GAAIV,CAAAA,OAAJ,CAAY,IAAZ,CAAkBC,KAAlB,CAGRR,MAAAA,CAAO,IAAIlB,QAAJ,CAAa,CACtBF,KAAM,IAAKA,CAAAA,IADW,CAEtBuB,QAASoB,GAFa,CAGtBjB,MAAOA,KAHe,CAItBL,KAAMpC,OAAQoC,CAAAA,IAJQ,CAKtBC,QAASrC,OAAQqC,CAAAA,OAAjBA,EAA4B,MALN,CAAb,CAWX,KAFA,IAAIuB,IAAM,IAAKnD,CAAAA,CAAEqC,CAAAA,GAAP,CAAW,IAAI9B,EAAJ,CAAO,CAAP,CAAX,CAAV,CAES6C,KAAO,CAAhB,CAAA,CAAqBA,IAAA,EAArB,CAA6B,CAC3B,IAAIC,EAAI9D,OAAQ8D,CAAAA,CAAR,CACN9D,OAAQ8D,CAAAA,CAAR,CAAUD,IAAV,CADM,CAEN,IAAI7C,EAAJ,CAAOmB,KAAKY,CAAAA,QAAL,CAAc,IAAKtC,CAAAA,CAAEmC,CAAAA,UAAP,EAAd,CAAP,CACFkB,EAAA,CAAI,IAAKZ,CAAAA,YAAL,CAAkBY,CAAlB,CAAqB,CAAA,CAArB,CACJ,IAAI,EAAa,CAAb,EAAAA,CAAEC,CAAAA,IAAF,CAAO,CAAP,CAAA,EAAgC,CAAhC,EAAkBD,CAAEd,CAAAA,GAAF,CAAMY,GAAN,CAAlB,CAAJ,CAAA,CAGA,IAAII,GAAK,IAAKpD,CAAAA,CAAEqD,CAAAA,GAAP,CAAWH,CAAX,CACT,IAAI,CAAAE,EAAGE,CAAAA,UAAH,EAAJ,CAAA,CAGA,IAAIC;AAAMH,EAAGI,CAAAA,IAAH,EACNC,IAAAA,CAAIF,GAAIG,CAAAA,IAAJ,CAAS,IAAK7D,CAAAA,CAAd,CACR,IAAkB,CAAlB,GAAI4D,GAAEN,CAAAA,IAAF,CAAO,CAAP,CAAJ,GAGIQ,CAEA,CAFIT,CAAEU,CAAAA,IAAF,CAAO,IAAK/D,CAAAA,CAAZ,CAAewD,CAAAA,GAAf,CAAmBI,GAAEJ,CAAAA,GAAF,CAAMR,GAAIE,CAAAA,UAAJ,EAAN,CAAwBc,CAAAA,IAAxB,CAA6BrB,GAA7B,CAAnB,CAEJ,CADJmB,CACI,CADAA,CAAED,CAAAA,IAAF,CAAO,IAAK7D,CAAAA,CAAZ,CACA,CAAc,CAAd,GAAA8D,CAAER,CAAAA,IAAF,CAAO,CAAP,CALJ,EAiBA,MATIW,IASG,EATcV,EAAGW,CAAAA,IAAH,EAAUC,CAAAA,KAAV,EAAA,CAAoB,CAApB,CAAwB,CAStC,GAR6B,CAAf,GAAAT,GAAInB,CAAAA,GAAJ,CAAQqB,GAAR,CAAA,CAAmB,CAAnB,CAAuB,CAQrC,EALHrE,OAAQ6E,CAAAA,SAKL,EALmC,CAKnC,CALkBN,CAAEvB,CAAAA,GAAF,CAAM,IAAKtC,CAAAA,EAAX,CAKlB,GAJL6D,CACA,CADI,IAAK9D,CAAAA,CAAEqC,CAAAA,GAAP,CAAWyB,CAAX,CACJ,CAAAG,GAAA,EAAiB,CAGZ,EAAA,IAAIrD,SAAJ,CAAc,CAAEgD,EAAGA,GAAL,CAAQE,EAAGA,CAAX,CAAcG,cAAeA,GAA7B,CAAd,CAtBP,CAJA,CAL2B,CA9B2B,CAiE1D3E,GAAGI,CAAAA,SAAU2E,CAAAA,MAAb,CAAsBC,QAAe,CAAC3B,GAAD,CAAM4B,SAAN,CAAiBvB,GAAjB,CAAsB9B,GAAtB,CAA2B,CAC9DyB,GAAA,CAAM,IAAKF,CAAAA,YAAL,CAAkB,IAAIlC,EAAJ,CAAOoC,GAAP,CAAY,EAAZ,CAAlB,CACNK,IAAA,CAAM,IAAK5B,CAAAA,aAAL,CAAmB4B,GAAnB,CAAwB9B,GAAxB,CACNqD,UAAA,CAAY,IAAI3D,SAAJ,CAAc2D,SAAd,CAAyB,KAAzB,CAGRX,IAAAA,CAAIW,SAAUX,CAAAA,CACdE,UAAAA,CAAIS,SAAUT,CAAAA,CAGlB;GAFgB,CAEhB,CAFIF,GAAEN,CAAAA,IAAF,CAAO,CAAP,CAEJ,EAFsC,CAEtC,EAFqBM,GAAErB,CAAAA,GAAF,CAAM,IAAKvC,CAAAA,CAAX,CAErB,EAAgB,CAAhB,CAAI8D,SAAER,CAAAA,IAAF,CAAO,CAAP,CAAJ,EAAsC,CAAtC,EAAqBQ,SAAEvB,CAAAA,GAAF,CAAM,IAAKvC,CAAAA,CAAX,CAArB,CACE,MAAO,CAAA,CAGLwE,UAAAA,CAAOV,SAAEC,CAAAA,IAAF,CAAO,IAAK/D,CAAAA,CAAZ,CACPyE,IAAAA,CAAKD,SAAKhB,CAAAA,GAAL,CAASb,GAAT,CAAckB,CAAAA,IAAd,CAAmB,IAAK7D,CAAAA,CAAxB,CACL0E,UAAAA,CAAKF,SAAKhB,CAAAA,GAAL,CAASI,GAAT,CAAYC,CAAAA,IAAZ,CAAiB,IAAK7D,CAAAA,CAAtB,CAGT,IAAI,CAAC,IAAKD,CAAAA,KAAM4E,CAAAA,aAAhB,CAEE,MADAC,IACA,CADI,IAAKzE,CAAAA,CAAE0E,CAAAA,MAAP,CAAcJ,GAAd,CAAkBzB,GAAI8B,CAAAA,SAAJ,EAAlB,CAAmCJ,SAAnC,CACJ,CAAIE,GAAEnB,CAAAA,UAAF,EAAJ,CACS,CAAA,CADT,CAGwC,CAHxC,GAGOmB,GAAEjB,CAAAA,IAAF,EAASE,CAAAA,IAAT,CAAc,IAAK7D,CAAAA,CAAnB,CAAsBuC,CAAAA,GAAtB,CAA0BqB,GAA1B,CAMTgB,IAAA,CAAI,IAAKzE,CAAAA,CAAE4E,CAAAA,OAAP,CAAeN,GAAf,CAAmBzB,GAAI8B,CAAAA,SAAJ,EAAnB,CAAoCJ,SAApC,CACJ,OAAIE,IAAEnB,CAAAA,UAAF,EAAJ,CACS,CAAA,CADT,CAMOmB,GAAEI,CAAAA,MAAF,CAASpB,GAAT,CArCuD,CAwChEtE,GAAGI,CAAAA,SAAUuF,CAAAA,aAAb,CAA6BC,QAAQ,CAACvC,GAAD,CAAM4B,SAAN,CAAiBY,CAAjB,CAAoBjE,GAApB,CAAyB,CAC5D1B,MAAA,EAAQ,CAAR;AAAY2F,CAAZ,IAAmBA,CAAnB,CAAsB,0CAAtB,CACAZ,UAAA,CAAY,IAAI3D,SAAJ,CAAc2D,SAAd,CAAyBrD,GAAzB,CAERlB,IAAAA,CAAI,IAAKA,CAAAA,CACb,KAAIoF,EAAI,IAAI7E,EAAJ,CAAOoC,GAAP,CACJiB,IAAAA,CAAIW,SAAUX,CAAAA,CAClB,KAAIE,EAAIS,SAAUT,CAAAA,CAAlB,CAGIuB,OAASF,CAATE,CAAa,CACCF,EAAdG,GAAmB,CACvB,IAA8C,CAA9C,EAAI1B,GAAErB,CAAAA,GAAF,CAAM,IAAKxC,CAAAA,KAAM6E,CAAAA,CAAEf,CAAAA,IAAb,CAAkB,IAAK9D,CAAAA,KAAMC,CAAAA,CAA7B,CAAN,CAAJ,EAAmDsF,CAAnD,CACE,KAAUC,MAAJ,CAAU,sCAAV,CAAN,CAIA3B,GAAA,CADE0B,CAAJ,CACM,IAAKvF,CAAAA,KAAMyF,CAAAA,UAAX,CAAsB5B,GAAE6B,CAAAA,GAAF,CAAM,IAAK1F,CAAAA,KAAMC,CAAAA,CAAjB,CAAtB,CAA2CqF,MAA3C,CADN,CAGM,IAAKtF,CAAAA,KAAMyF,CAAAA,UAAX,CAAsB5B,GAAtB,CAAyByB,MAAzB,CAEFK,UAAAA,CAAOnB,SAAUX,CAAAA,CAAEG,CAAAA,IAAZ,CAAiB/D,GAAjB,CACP2F,EAAAA,CAAK3F,GAAEqC,CAAAA,GAAF,CAAM+C,CAAN,CAAS5B,CAAAA,GAAT,CAAakC,SAAb,CAAmB7B,CAAAA,IAAnB,CAAwB7D,GAAxB,CACL4F,IAAAA,CAAK9B,CAAEN,CAAAA,GAAF,CAAMkC,SAAN,CAAY7B,CAAAA,IAAZ,CAAiB7D,GAAjB,CAIT,OAAO,KAAKG,CAAAA,CAAE0E,CAAAA,MAAP,CAAcc,CAAd,CAAkB/B,GAAlB,CAAqBgC,GAArB,CA3BqD,CA8B9DtG,GAAGI,CAAAA,SAAUmG,CAAAA,mBAAb;AAAmCC,QAAQ,CAACV,UAAD,CAAIb,SAAJ,CAAewB,CAAf,CAAkB7E,GAAlB,CAAuB,CAChEqD,SAAA,CAAY,IAAI3D,SAAJ,CAAc2D,SAAd,CAAyBrD,GAAzB,CACZ,IAAgC,IAAhC,GAAIqD,SAAUN,CAAAA,aAAd,CACE,MAAOM,UAAUN,CAAAA,aAEnB,KAAS+B,GAAT,CAAa,CAAb,CAAoB,CAApB,CAAgBA,GAAhB,CAAuBA,GAAA,EAAvB,CAA4B,CAE1B,GAAI,CACF,IAAAC,OAAS,IAAKhB,CAAAA,aAAL,CAAmBG,UAAnB,CAAsBb,SAAtB,CAAiCyB,GAAjC,CADP,CAEF,MAAOZ,CAAP,CAAU,CACV,QADU,CAIZ,GAAIa,MAAOC,CAAAA,EAAP,CAAUH,CAAV,CAAJ,CACE,MAAOC,IATiB,CAW5B,KAAUT,MAAJ,CAAU,sCAAV,CAAN,CAhBgE,CAlO6C;",
"sources":["node_modules/elliptic/lib/elliptic/ec/index.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$elliptic$lib$elliptic$ec$index\"] = function(global,require,module,exports) {\n'use strict';\n\nvar BN = require('bn.js');\nvar HmacDRBG = require('hmac-drbg');\nvar utils = require('../utils');\nvar curves = require('../curves');\nvar rand = require('brorand');\nvar assert = utils.assert;\n\nvar KeyPair = require('./key');\nvar Signature = require('./signature');\n\nfunction EC(options) {\n  if (!(this instanceof EC))\n    return new EC(options);\n\n  // Shortcut `elliptic.ec(curve-name)`\n  if (typeof options === 'string') {\n    assert(Object.prototype.hasOwnProperty.call(curves, options),\n      'Unknown curve ' + options);\n\n    options = curves[options];\n  }\n\n  // Shortcut for `elliptic.ec(elliptic.curves.curveName)`\n  if (options instanceof curves.PresetCurve)\n    options = { curve: options };\n\n  this.curve = options.curve.curve;\n  this.n = this.curve.n;\n  this.nh = this.n.ushrn(1);\n  this.g = this.curve.g;\n\n  // Point on curve\n  this.g = options.curve.g;\n  this.g.precompute(options.curve.n.bitLength() + 1);\n\n  // Hash for function for DRBG\n  this.hash = options.hash || options.curve.hash;\n}\nmodule.exports = EC;\n\nEC.prototype.keyPair = function keyPair(options) {\n  return new KeyPair(this, options);\n};\n\nEC.prototype.keyFromPrivate = function keyFromPrivate(priv, enc) {\n  return KeyPair.fromPrivate(this, priv, enc);\n};\n\nEC.prototype.keyFromPublic = function keyFromPublic(pub, enc) {\n  return KeyPair.fromPublic(this, pub, enc);\n};\n\nEC.prototype.genKeyPair = function genKeyPair(options) {\n  if (!options)\n    options = {};\n\n  // Instantiate Hmac_DRBG\n  var drbg = new HmacDRBG({\n    hash: this.hash,\n    pers: options.pers,\n    persEnc: options.persEnc || 'utf8',\n    entropy: options.entropy || rand(this.hash.hmacStrength),\n    entropyEnc: options.entropy && options.entropyEnc || 'utf8',\n    nonce: this.n.toArray(),\n  });\n\n  var bytes = this.n.byteLength();\n  var ns2 = this.n.sub(new BN(2));\n  for (;;) {\n    var priv = new BN(drbg.generate(bytes));\n    if (priv.cmp(ns2) > 0)\n      continue;\n\n    priv.iaddn(1);\n    return this.keyFromPrivate(priv);\n  }\n};\n\nEC.prototype._truncateToN = function _truncateToN(msg, truncOnly) {\n  var delta = msg.byteLength() * 8 - this.n.bitLength();\n  if (delta > 0)\n    msg = msg.ushrn(delta);\n  if (!truncOnly && msg.cmp(this.n) >= 0)\n    return msg.sub(this.n);\n  else\n    return msg;\n};\n\nEC.prototype.sign = function sign(msg, key, enc, options) {\n  if (typeof enc === 'object') {\n    options = enc;\n    enc = null;\n  }\n  if (!options)\n    options = {};\n\n  key = this.keyFromPrivate(key, enc);\n  msg = this._truncateToN(new BN(msg, 16));\n\n  // Zero-extend key to provide enough entropy\n  var bytes = this.n.byteLength();\n  var bkey = key.getPrivate().toArray('be', bytes);\n\n  // Zero-extend nonce to have the same byte size as N\n  var nonce = msg.toArray('be', bytes);\n\n  // Instantiate Hmac_DRBG\n  var drbg = new HmacDRBG({\n    hash: this.hash,\n    entropy: bkey,\n    nonce: nonce,\n    pers: options.pers,\n    persEnc: options.persEnc || 'utf8',\n  });\n\n  // Number of bytes to generate\n  var ns1 = this.n.sub(new BN(1));\n\n  for (var iter = 0; ; iter++) {\n    var k = options.k ?\n      options.k(iter) :\n      new BN(drbg.generate(this.n.byteLength()));\n    k = this._truncateToN(k, true);\n    if (k.cmpn(1) <= 0 || k.cmp(ns1) >= 0)\n      continue;\n\n    var kp = this.g.mul(k);\n    if (kp.isInfinity())\n      continue;\n\n    var kpX = kp.getX();\n    var r = kpX.umod(this.n);\n    if (r.cmpn(0) === 0)\n      continue;\n\n    var s = k.invm(this.n).mul(r.mul(key.getPrivate()).iadd(msg));\n    s = s.umod(this.n);\n    if (s.cmpn(0) === 0)\n      continue;\n\n    var recoveryParam = (kp.getY().isOdd() ? 1 : 0) |\n                        (kpX.cmp(r) !== 0 ? 2 : 0);\n\n    // Use complement of `s`, if it is > `n / 2`\n    if (options.canonical && s.cmp(this.nh) > 0) {\n      s = this.n.sub(s);\n      recoveryParam ^= 1;\n    }\n\n    return new Signature({ r: r, s: s, recoveryParam: recoveryParam });\n  }\n};\n\nEC.prototype.verify = function verify(msg, signature, key, enc) {\n  msg = this._truncateToN(new BN(msg, 16));\n  key = this.keyFromPublic(key, enc);\n  signature = new Signature(signature, 'hex');\n\n  // Perform primitive values validation\n  var r = signature.r;\n  var s = signature.s;\n  if (r.cmpn(1) < 0 || r.cmp(this.n) >= 0)\n    return false;\n  if (s.cmpn(1) < 0 || s.cmp(this.n) >= 0)\n    return false;\n\n  // Validate signature\n  var sinv = s.invm(this.n);\n  var u1 = sinv.mul(msg).umod(this.n);\n  var u2 = sinv.mul(r).umod(this.n);\n  var p;\n\n  if (!this.curve._maxwellTrick) {\n    p = this.g.mulAdd(u1, key.getPublic(), u2);\n    if (p.isInfinity())\n      return false;\n\n    return p.getX().umod(this.n).cmp(r) === 0;\n  }\n\n  // NOTE: Greg Maxwell's trick, inspired by:\n  // https://git.io/vad3K\n\n  p = this.g.jmulAdd(u1, key.getPublic(), u2);\n  if (p.isInfinity())\n    return false;\n\n  // Compare `p.x` of Jacobian point with `r`,\n  // this will do `p.x == r * p.z^2` instead of multiplying `p.x` by the\n  // inverse of `p.z^2`\n  return p.eqXToP(r);\n};\n\nEC.prototype.recoverPubKey = function(msg, signature, j, enc) {\n  assert((3 & j) === j, 'The recovery param is more than two bits');\n  signature = new Signature(signature, enc);\n\n  var n = this.n;\n  var e = new BN(msg);\n  var r = signature.r;\n  var s = signature.s;\n\n  // A set LSB signifies that the y-coordinate is odd\n  var isYOdd = j & 1;\n  var isSecondKey = j >> 1;\n  if (r.cmp(this.curve.p.umod(this.curve.n)) >= 0 && isSecondKey)\n    throw new Error('Unable to find sencond key candinate');\n\n  // 1.1. Let x = r + jn.\n  if (isSecondKey)\n    r = this.curve.pointFromX(r.add(this.curve.n), isYOdd);\n  else\n    r = this.curve.pointFromX(r, isYOdd);\n\n  var rInv = signature.r.invm(n);\n  var s1 = n.sub(e).mul(rInv).umod(n);\n  var s2 = s.mul(rInv).umod(n);\n\n  // 1.6.1 Compute Q = r^-1 (sR -  eG)\n  //               Q = r^-1 (sR + -eG)\n  return this.g.mulAdd(s1, r, s2);\n};\n\nEC.prototype.getKeyRecoveryParam = function(e, signature, Q, enc) {\n  signature = new Signature(signature, enc);\n  if (signature.recoveryParam !== null)\n    return signature.recoveryParam;\n\n  for (var i = 0; i < 4; i++) {\n    var Qprime;\n    try {\n      Qprime = this.recoverPubKey(e, signature, i);\n    } catch (e) {\n      continue;\n    }\n\n    if (Qprime.eq(Q))\n      return i;\n  }\n  throw new Error('Unable to find valid recovery factor');\n};\n\n};"],
"names":["shadow$provide","global","require","module","exports","EC","options","assert","Object","prototype","hasOwnProperty","call","curves","PresetCurve","curve","n","nh","ushrn","g","precompute","bitLength","hash","BN","HmacDRBG","utils","rand","KeyPair","Signature","keyPair","EC.prototype.keyPair","keyFromPrivate","EC.prototype.keyFromPrivate","priv","enc","fromPrivate","keyFromPublic","EC.prototype.keyFromPublic","pub","fromPublic","genKeyPair","EC.prototype.genKeyPair","drbg","pers","persEnc","entropy","hmacStrength","entropyEnc","nonce","toArray","bytes","byteLength","ns2","sub","generate","cmp","iaddn","_truncateToN","EC.prototype._truncateToN","msg","truncOnly","delta","sign","EC.prototype.sign","key","bkey","getPrivate","ns1","iter","k","cmpn","kp","mul","isInfinity","kpX","getX","r","umod","s","invm","iadd","recoveryParam","getY","isOdd","canonical","verify","EC.prototype.verify","signature","sinv","u1","u2","_maxwellTrick","p","mulAdd","getPublic","jmulAdd","eqXToP","recoverPubKey","EC.prototype.recoverPubKey","j","e","isYOdd","isSecondKey","Error","pointFromX","add","rInv","s1","s2","getKeyRecoveryParam","EC.prototype.getKeyRecoveryParam","Q","i","Qprime","eq"]
}
